(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[3],{

/***/ "./components/audit_table/audit_table.jsx":
/*!************************************************!*\
  !*** ./components/audit_table/audit_table.jsx ***!
  \************************************************/
/*! exports provided: default, formatAuditInfo */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"formatAuditInfo\", function() { return formatAuditInfo; });\n/* harmony import */ var core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es6.regexp.split */ \"./node_modules/core-js/modules/es6.regexp.split.js\");\n/* harmony import */ var core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/es6.regexp.replace */ \"./node_modules/core-js/modules/es6.regexp.replace.js\");\n/* harmony import */ var core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! prop-types */ \"./node_modules/prop-types/index.js\");\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-intl */ \"./node_modules/react-intl/lib/index.es.js\");\n/* harmony import */ var utils_utils_jsx__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! utils/utils.jsx */ \"./utils/utils.jsx\");\n/* harmony import */ var utils_i18n__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! utils/i18n */ \"./utils/i18n.jsx\");\n\n\n// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\n\n\n\n\nvar holders = Object(react_intl__WEBPACK_IMPORTED_MODULE_4__[\"defineMessages\"])({\n  sessionRevoked: {\n    id: Object(utils_i18n__WEBPACK_IMPORTED_MODULE_6__[\"t\"])('audit_table.sessionRevoked'),\n    defaultMessage: 'The session with id {sessionId} was revoked'\n  },\n  channelCreated: {\n    id: Object(utils_i18n__WEBPACK_IMPORTED_MODULE_6__[\"t\"])('audit_table.channelCreated'),\n    defaultMessage: 'Created the {channelName} channel'\n  },\n  establishedDM: {\n    id: Object(utils_i18n__WEBPACK_IMPORTED_MODULE_6__[\"t\"])('audit_table.establishedDM'),\n    defaultMessage: 'Established a direct message channel with {username}'\n  },\n  nameUpdated: {\n    id: Object(utils_i18n__WEBPACK_IMPORTED_MODULE_6__[\"t\"])('audit_table.nameUpdated'),\n    defaultMessage: 'Updated the {channelName} channel name'\n  },\n  headerUpdated: {\n    id: Object(utils_i18n__WEBPACK_IMPORTED_MODULE_6__[\"t\"])('audit_table.headerUpdated'),\n    defaultMessage: 'Updated the {channelName} channel header'\n  },\n  channelDeleted: {\n    id: Object(utils_i18n__WEBPACK_IMPORTED_MODULE_6__[\"t\"])('audit_table.channelDeleted'),\n    defaultMessage: 'Archived the channel with the URL {url}'\n  },\n  userAdded: {\n    id: Object(utils_i18n__WEBPACK_IMPORTED_MODULE_6__[\"t\"])('audit_table.userAdded'),\n    defaultMessage: 'Added {username} to the {channelName} channel'\n  },\n  userRemoved: {\n    id: Object(utils_i18n__WEBPACK_IMPORTED_MODULE_6__[\"t\"])('audit_table.userRemoved'),\n    defaultMessage: 'Removed {username} to the {channelName} channel'\n  },\n  attemptedRegisterApp: {\n    id: Object(utils_i18n__WEBPACK_IMPORTED_MODULE_6__[\"t\"])('audit_table.attemptedRegisterApp'),\n    defaultMessage: 'Attempted to register a new OAuth Application with ID {id}'\n  },\n  attemptedAllowOAuthAccess: {\n    id: Object(utils_i18n__WEBPACK_IMPORTED_MODULE_6__[\"t\"])('audit_table.attemptedAllowOAuthAccess'),\n    defaultMessage: 'Attempted to allow a new OAuth service access'\n  },\n  successfullOAuthAccess: {\n    id: Object(utils_i18n__WEBPACK_IMPORTED_MODULE_6__[\"t\"])('audit_table.successfullOAuthAccess'),\n    defaultMessage: 'Successfully gave a new OAuth service access'\n  },\n  failedOAuthAccess: {\n    id: Object(utils_i18n__WEBPACK_IMPORTED_MODULE_6__[\"t\"])('audit_table.failedOAuthAccess'),\n    defaultMessage: 'Failed to allow a new OAuth service access - the redirect URI did not match the previously registered callback'\n  },\n  attemptedOAuthToken: {\n    id: Object(utils_i18n__WEBPACK_IMPORTED_MODULE_6__[\"t\"])('audit_table.attemptedOAuthToken'),\n    defaultMessage: 'Attempted to get an OAuth access token'\n  },\n  successfullOAuthToken: {\n    id: Object(utils_i18n__WEBPACK_IMPORTED_MODULE_6__[\"t\"])('audit_table.successfullOAuthToken'),\n    defaultMessage: 'Successfully added a new OAuth service'\n  },\n  oauthTokenFailed: {\n    id: Object(utils_i18n__WEBPACK_IMPORTED_MODULE_6__[\"t\"])('audit_table.oauthTokenFailed'),\n    defaultMessage: 'Failed to get an OAuth access token - {token}'\n  },\n  attemptedLogin: {\n    id: Object(utils_i18n__WEBPACK_IMPORTED_MODULE_6__[\"t\"])('audit_table.attemptedLogin'),\n    defaultMessage: 'Attempted to login'\n  },\n  authenticated: {\n    id: Object(utils_i18n__WEBPACK_IMPORTED_MODULE_6__[\"t\"])('audit_table.authenticated'),\n    defauleMessage: 'Successfully authenticated'\n  },\n  successfullLogin: {\n    id: Object(utils_i18n__WEBPACK_IMPORTED_MODULE_6__[\"t\"])('audit_table.successfullLogin'),\n    defaultMessage: 'Successfully logged in'\n  },\n  failedLogin: {\n    id: Object(utils_i18n__WEBPACK_IMPORTED_MODULE_6__[\"t\"])('audit_table.failedLogin'),\n    defaultMessage: 'FAILED login attempt'\n  },\n  updatePicture: {\n    id: Object(utils_i18n__WEBPACK_IMPORTED_MODULE_6__[\"t\"])('audit_table.updatePicture'),\n    defaultMessage: 'Updated your profile picture'\n  },\n  updateGeneral: {\n    id: Object(utils_i18n__WEBPACK_IMPORTED_MODULE_6__[\"t\"])('audit_table.updateGeneral'),\n    defaultMessage: 'Updated the general settings of your account'\n  },\n  attemptedPassword: {\n    id: Object(utils_i18n__WEBPACK_IMPORTED_MODULE_6__[\"t\"])('audit_table.attemptedPassword'),\n    defaultMessage: 'Attempted to change password'\n  },\n  successfullPassword: {\n    id: Object(utils_i18n__WEBPACK_IMPORTED_MODULE_6__[\"t\"])('audit_table.successfullPassword'),\n    defaultMessage: 'Successfully changed password'\n  },\n  failedPassword: {\n    id: Object(utils_i18n__WEBPACK_IMPORTED_MODULE_6__[\"t\"])('audit_table.failedPassword'),\n    defaultMessage: 'Failed to change password - tried to update user password who was logged in through OAuth'\n  },\n  updatedRol: {\n    id: Object(utils_i18n__WEBPACK_IMPORTED_MODULE_6__[\"t\"])('audit_table.updatedRol'),\n    defaultMessage: 'Updated user role(s) to '\n  },\n  member: {\n    id: Object(utils_i18n__WEBPACK_IMPORTED_MODULE_6__[\"t\"])('audit_table.member'),\n    defaultMessage: 'member'\n  },\n  accountActive: {\n    id: Object(utils_i18n__WEBPACK_IMPORTED_MODULE_6__[\"t\"])('audit_table.accountActive'),\n    defaultMessage: 'Account activated'\n  },\n  accountInactive: {\n    id: Object(utils_i18n__WEBPACK_IMPORTED_MODULE_6__[\"t\"])('audit_table.accountInactive'),\n    defaultMessage: 'Account deactivated'\n  },\n  by: {\n    id: Object(utils_i18n__WEBPACK_IMPORTED_MODULE_6__[\"t\"])('audit_table.by'),\n    defaultMessage: ' by {username}'\n  },\n  byAdmin: {\n    id: Object(utils_i18n__WEBPACK_IMPORTED_MODULE_6__[\"t\"])('audit_table.byAdmin'),\n    defaultMessage: ' by an admin'\n  },\n  sentEmail: {\n    id: Object(utils_i18n__WEBPACK_IMPORTED_MODULE_6__[\"t\"])('audit_table.sentEmail'),\n    defaultMessage: 'Sent an email to {email} to reset your password'\n  },\n  attemptedReset: {\n    id: Object(utils_i18n__WEBPACK_IMPORTED_MODULE_6__[\"t\"])('audit_table.attemptedReset'),\n    defaultMessage: 'Attempted to reset password'\n  },\n  successfullReset: {\n    id: Object(utils_i18n__WEBPACK_IMPORTED_MODULE_6__[\"t\"])('audit_table.successfullReset'),\n    defaultMessage: 'Successfully reset password'\n  },\n  updateGlobalNotifications: {\n    id: Object(utils_i18n__WEBPACK_IMPORTED_MODULE_6__[\"t\"])('audit_table.updateGlobalNotifications'),\n    defaultMessage: 'Updated your global notification settings'\n  },\n  attemptedWebhookCreate: {\n    id: Object(utils_i18n__WEBPACK_IMPORTED_MODULE_6__[\"t\"])('audit_table.attemptedWebhookCreate'),\n    defaultMessage: 'Attempted to create a webhook'\n  },\n  succcessfullWebhookCreate: {\n    id: Object(utils_i18n__WEBPACK_IMPORTED_MODULE_6__[\"t\"])('audit_table.successfullWebhookCreate'),\n    defaultMessage: 'Successfully created a webhook'\n  },\n  failedWebhookCreate: {\n    id: Object(utils_i18n__WEBPACK_IMPORTED_MODULE_6__[\"t\"])('audit_table.failedWebhookCreate'),\n    defaultMessage: 'Failed to create a webhook - bad channel permissions'\n  },\n  attemptedWebhookDelete: {\n    id: Object(utils_i18n__WEBPACK_IMPORTED_MODULE_6__[\"t\"])('audit_table.attemptedWebhookDelete'),\n    defaultMessage: 'Attempted to delete a webhook'\n  },\n  successfullWebhookDelete: {\n    id: Object(utils_i18n__WEBPACK_IMPORTED_MODULE_6__[\"t\"])('audit_table.successfullWebhookDelete'),\n    defaultMessage: 'Successfully deleted a webhook'\n  },\n  failedWebhookDelete: {\n    id: Object(utils_i18n__WEBPACK_IMPORTED_MODULE_6__[\"t\"])('audit_table.failedWebhookDelete'),\n    defaultMessage: 'Failed to delete a webhook - inappropriate conditions'\n  },\n  logout: {\n    id: Object(utils_i18n__WEBPACK_IMPORTED_MODULE_6__[\"t\"])('audit_table.logout'),\n    defaultMessage: 'Logged out of your account'\n  },\n  verified: {\n    id: Object(utils_i18n__WEBPACK_IMPORTED_MODULE_6__[\"t\"])('audit_table.verified'),\n    defaultMessage: 'Successfully verified your email address'\n  },\n  revokedAll: {\n    id: Object(utils_i18n__WEBPACK_IMPORTED_MODULE_6__[\"t\"])('audit_table.revokedAll'),\n    defaultMessage: 'Revoked all current sessions for the team'\n  },\n  loginAttempt: {\n    id: Object(utils_i18n__WEBPACK_IMPORTED_MODULE_6__[\"t\"])('audit_table.loginAttempt'),\n    defaultMessage: ' (Login attempt)'\n  },\n  loginFailure: {\n    id: Object(utils_i18n__WEBPACK_IMPORTED_MODULE_6__[\"t\"])('audit_table.loginFailure'),\n    defaultMessage: ' (Login failure)'\n  },\n  attemptedLicenseAdd: {\n    id: Object(utils_i18n__WEBPACK_IMPORTED_MODULE_6__[\"t\"])('audit_table.attemptedLicenseAdd'),\n    defaultMessage: 'Attempted to add new license'\n  },\n  successfullLicenseAdd: {\n    id: Object(utils_i18n__WEBPACK_IMPORTED_MODULE_6__[\"t\"])('audit_table.successfullLicenseAdd'),\n    defaultMessage: 'Successfully added new license'\n  },\n  failedExpiredLicenseAdd: {\n    id: Object(utils_i18n__WEBPACK_IMPORTED_MODULE_6__[\"t\"])('audit_table.failedExpiredLicenseAdd'),\n    defaultMessage: 'Failed to add a new license as it has either expired or not yet been started'\n  },\n  failedInvalidLicenseAdd: {\n    id: Object(utils_i18n__WEBPACK_IMPORTED_MODULE_6__[\"t\"])('audit_table.failedInvalidLicenseAdd'),\n    defaultMessage: 'Failed to add an invalid license'\n  },\n  licenseRemoved: {\n    id: Object(utils_i18n__WEBPACK_IMPORTED_MODULE_6__[\"t\"])('audit_table.licenseRemoved'),\n    defaultMessage: 'Successfully removed a license'\n  }\n});\n\nfunction AuditTable(props) {\n  var accessList = [];\n  var formatMessage = props.intl.formatMessage;\n\n  for (var i = 0; i < props.audits.length; i++) {\n    var audit = props.audits[i];\n    var auditInfo = formatAuditInfo(audit, formatMessage, props.currentUser, props.getByName, props.getUser);\n    var uContent = void 0;\n\n    if (props.showUserId) {\n      var profile = props.getUser(auditInfo.userId);\n      var data = profile ? profile.email : auditInfo.userId;\n      uContent = react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(\"td\", {\n        className: \"word-break--all\"\n      }, data);\n    }\n\n    var iContent = void 0;\n\n    if (props.showIp) {\n      iContent = react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(\"td\", {\n        className: \"whitespace--nowrap word-break--all\"\n      }, auditInfo.ip);\n    }\n\n    var sContent = void 0;\n\n    if (props.showSession) {\n      sContent = react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(\"td\", {\n        className: \"whitespace--nowrap word-break--all\"\n      }, auditInfo.sessionId);\n    }\n\n    var descStyle = '';\n\n    if (auditInfo.desc.toLowerCase().indexOf('fail') !== -1) {\n      descStyle = ' color--error';\n    }\n\n    accessList[i] = react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(\"tr\", {\n      key: audit.id\n    }, react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(\"td\", {\n      className: \"whitespace--nowrap word-break--all\"\n    }, auditInfo.timestamp), uContent, react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(\"td\", {\n      className: 'word-break--all' + descStyle\n    }, auditInfo.desc), iContent, sContent);\n  }\n\n  var userIdContent;\n\n  if (props.showUserId) {\n    userIdContent = react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(\"th\", null, react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_intl__WEBPACK_IMPORTED_MODULE_4__[\"FormattedMessage\"], {\n      id: \"audit_table.userId\",\n      defaultMessage: \"User ID\"\n    }));\n  }\n\n  var ipContent;\n\n  if (props.showIp) {\n    ipContent = react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(\"th\", null, react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_intl__WEBPACK_IMPORTED_MODULE_4__[\"FormattedMessage\"], {\n      id: \"audit_table.ip\",\n      defaultMessage: \"IP Address\"\n    }));\n  }\n\n  var sessionContent;\n\n  if (props.showSession) {\n    sessionContent = react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(\"th\", null, react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_intl__WEBPACK_IMPORTED_MODULE_4__[\"FormattedMessage\"], {\n      id: \"audit_table.session\",\n      defaultMessage: \"Session ID\"\n    }));\n  }\n\n  return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(\"table\", {\n    className: \"table\"\n  }, react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(\"thead\", null, react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(\"tr\", null, react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(\"th\", null, react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_intl__WEBPACK_IMPORTED_MODULE_4__[\"FormattedMessage\"], {\n    id: \"audit_table.timestamp\",\n    defaultMessage: \"Timestamp\"\n  })), userIdContent, react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(\"th\", null, react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_intl__WEBPACK_IMPORTED_MODULE_4__[\"FormattedMessage\"], {\n    id: \"audit_table.action\",\n    defaultMessage: \"Action\"\n  })), ipContent, sessionContent)), react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(\"tbody\", null, accessList));\n}\n\nAuditTable.propTypes = {\n  intl: react_intl__WEBPACK_IMPORTED_MODULE_4__[\"intlShape\"].isRequired,\n  audits: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.array.isRequired,\n  showUserId: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.bool,\n  showIp: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.bool,\n  showSession: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.bool,\n  currentUser: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.object.isRequired,\n  getUser: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.func.isRequired,\n  getByName: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.func.isRequired\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (Object(react_intl__WEBPACK_IMPORTED_MODULE_4__[\"injectIntl\"])(AuditTable));\nfunction formatAuditInfo(audit, formatMessage, currentUser, getByName, getUser) {\n  var actionURL = audit.action.replace(/\\/api\\/v[1-9]/, '');\n  var auditDesc = '';\n\n  if (actionURL.indexOf('/channels') === 0) {\n    var channelInfo = audit.extra_info.split(' ');\n    var channelNameField = channelInfo[0].split('=');\n    var channelURL = '';\n    var channelObj;\n    var channelName = '';\n\n    if (channelNameField.indexOf('name') >= 0) {\n      channelURL = channelNameField[channelNameField.indexOf('name') + 1];\n      channelObj = getByName(channelURL);\n\n      if (channelObj) {\n        channelName = channelObj.display_name;\n      } else {\n        channelName = channelURL;\n      }\n    }\n\n    switch (actionURL) {\n      case '/channels/create':\n        auditDesc = formatMessage(holders.channelCreated, {\n          channelName: channelName\n        });\n        break;\n\n      case '/channels/create_direct':\n        auditDesc = formatMessage(holders.establishedDM, {\n          username: Object(utils_utils_jsx__WEBPACK_IMPORTED_MODULE_5__[\"getDirectTeammate\"])(channelObj.id).username\n        });\n        break;\n\n      case '/channels/update':\n        auditDesc = formatMessage(holders.nameUpdated, {\n          channelName: channelName\n        });\n        break;\n\n      case '/channels/update_desc': // support the old path\n\n      case '/channels/update_header':\n        auditDesc = formatMessage(holders.headerUpdated, {\n          channelName: channelName\n        });\n        break;\n\n      default:\n        {\n          var userIdField = [];\n          var userId = '';\n          var username = '';\n\n          if (channelInfo[1]) {\n            userIdField = channelInfo[1].split('=');\n\n            if (userIdField.indexOf('user_id') >= 0) {\n              userId = userIdField[userIdField.indexOf('user_id') + 1];\n              var profile = getUser(userId);\n\n              if (profile) {\n                username = profile.username;\n              }\n            }\n          }\n\n          if (/\\/channels\\/[A-Za-z0-9]+\\/delete/.test(actionURL)) {\n            auditDesc = formatMessage(holders.channelDeleted, {\n              url: channelURL\n            });\n          } else if (/\\/channels\\/[A-Za-z0-9]+\\/add/.test(actionURL)) {\n            auditDesc = formatMessage(holders.userAdded, {\n              username: username,\n              channelName: channelName\n            });\n          } else if (/\\/channels\\/[A-Za-z0-9]+\\/remove/.test(actionURL)) {\n            auditDesc = formatMessage(holders.userRemoved, {\n              username: username,\n              channelName: channelName\n            });\n          }\n\n          break;\n        }\n    }\n  } else if (actionURL.indexOf('/oauth') === 0) {\n    var oauthInfo = audit.extra_info.split(' ');\n\n    switch (actionURL) {\n      case '/oauth/register':\n        {\n          var clientIdField = oauthInfo[0].split('=');\n\n          if (clientIdField[0] === 'client_id') {\n            auditDesc = formatMessage(holders.attemptedRegisterApp, {\n              id: clientIdField[1]\n            });\n          }\n\n          break;\n        }\n\n      case '/oauth/allow':\n        if (oauthInfo[0] === 'attempt') {\n          auditDesc = formatMessage(holders.attemptedAllowOAuthAccess);\n        } else if (oauthInfo[0] === 'success') {\n          auditDesc = formatMessage(holders.successfullOAuthAccess);\n        } else if (oauthInfo[0] === 'fail - redirect_uri did not match registered callback') {\n          auditDesc = formatMessage(holders.failedOAuthAccess);\n        }\n\n        break;\n\n      case '/oauth/access_token':\n        if (oauthInfo[0] === 'attempt') {\n          auditDesc = formatMessage(holders.attemptedOAuthToken);\n        } else if (oauthInfo[0] === 'success') {\n          auditDesc = formatMessage(holders.successfullOAuthToken);\n        } else {\n          var oauthTokenFailure = oauthInfo[0].split('-');\n\n          if (oauthTokenFailure[0].trim() === 'fail' && oauthTokenFailure[1]) {\n            auditDesc = formatMessage(oauthTokenFailure, {\n              token: oauthTokenFailure[1].trim()\n            });\n          }\n        }\n\n        break;\n\n      default:\n        break;\n    }\n  } else if (actionURL.indexOf('/users') === 0) {\n    var userInfo = audit.extra_info.split(' ');\n\n    switch (actionURL) {\n      case '/users/login':\n        if (userInfo[0] === 'attempt') {\n          auditDesc = formatMessage(holders.attemptedLogin);\n        } else if (userInfo[0] === 'success') {\n          auditDesc = formatMessage(holders.successfullLogin);\n        } else if (userInfo[0] === 'authenticated') {\n          auditDesc = formatMessage(holders.authenticated);\n        } else if (userInfo[0]) {\n          auditDesc = formatMessage(holders.failedLogin);\n        }\n\n        break;\n\n      case '/users/revoke_session':\n        auditDesc = formatMessage(holders.sessionRevoked, {\n          sessionId: userInfo[0].split('=')[1]\n        });\n        break;\n\n      case '/users/newimage':\n        auditDesc = formatMessage(holders.updatePicture);\n        break;\n\n      case '/users/update':\n        auditDesc = formatMessage(holders.updateGeneral);\n        break;\n\n      case '/users/newpassword':\n        if (userInfo[0] === 'attempted') {\n          auditDesc = formatMessage(holders.attemptedPassword);\n        } else if (userInfo[0] === 'completed') {\n          auditDesc = formatMessage(holders.successfullPassword);\n        } else if (userInfo[0] === 'failed - tried to update user password who was logged in through oauth') {\n          auditDesc = formatMessage(holders.failedPassword);\n        }\n\n        break;\n\n      case '/users/update_roles':\n        {\n          var userRoles = userInfo[0].split('=')[1];\n          auditDesc = formatMessage(holders.updatedRol);\n\n          if (userRoles.trim()) {\n            auditDesc += userRoles;\n          } else {\n            auditDesc += formatMessage(holders.member);\n          }\n\n          break;\n        }\n\n      case '/users/update_active':\n        {\n          var updateType = userInfo[0].split('=')[0];\n          var updateField = userInfo[0].split('=')[1];\n          /* Either describes account activation/deactivation or a revoked session as part of an account deactivation */\n\n          if (updateType === 'active') {\n            if (updateField === 'true') {\n              auditDesc = formatMessage(holders.accountActive);\n            } else if (updateField === 'false') {\n              auditDesc = formatMessage(holders.accountInactive);\n            }\n\n            var actingUserInfo = userInfo[1].split('=');\n\n            if (actingUserInfo[0] === 'session_user') {\n              var actingUser = getUser(actingUserInfo[1]);\n              var user = currentUser;\n\n              if (user && actingUser && Object(utils_utils_jsx__WEBPACK_IMPORTED_MODULE_5__[\"isSystemAdmin\"])(user.roles)) {\n                auditDesc += formatMessage(holders.by, {\n                  username: actingUser.username\n                });\n              } else if (user && actingUser) {\n                auditDesc += formatMessage(holders.byAdmin);\n              }\n            }\n          } else if (updateType === 'session_id') {\n            auditDesc = formatMessage(holders.sessionRevoked, {\n              sessionId: updateField\n            });\n          }\n\n          break;\n        }\n\n      case '/users/send_password_reset':\n        auditDesc = formatMessage(holders.sentEmail, {\n          email: userInfo[0].split('=')[1]\n        });\n        break;\n\n      case '/users/reset_password':\n        if (userInfo[0] === 'attempt') {\n          auditDesc = formatMessage(holders.attemptedReset);\n        } else if (userInfo[0] === 'success') {\n          auditDesc = formatMessage(holders.successfullReset);\n        }\n\n        break;\n\n      case '/users/update_notify':\n        auditDesc = formatMessage(holders.updateGlobalNotifications);\n        break;\n\n      default:\n        break;\n    }\n  } else if (actionURL.indexOf('/hooks') === 0) {\n    var webhookInfo = audit.extra_info;\n\n    switch (actionURL) {\n      case '/hooks/incoming/create':\n        if (webhookInfo === 'attempt') {\n          auditDesc = formatMessage(holders.attemptedWebhookCreate);\n        } else if (webhookInfo === 'success') {\n          auditDesc = formatMessage(holders.succcessfullWebhookCreate);\n        } else if (webhookInfo === 'fail - bad channel permissions') {\n          auditDesc = formatMessage(holders.failedWebhookCreate);\n        }\n\n        break;\n\n      case '/hooks/incoming/delete':\n        if (webhookInfo === 'attempt') {\n          auditDesc = formatMessage(holders.attemptedWebhookDelete);\n        } else if (webhookInfo === 'success') {\n          auditDesc = formatMessage(holders.successfullWebhookDelete);\n        } else if (webhookInfo === 'fail - inappropriate conditions') {\n          auditDesc = formatMessage(holders.failedWebhookDelete);\n        }\n\n        break;\n\n      default:\n        break;\n    }\n  } else if (actionURL.indexOf('/license') === 0) {\n    var licenseInfo = audit.extra_info;\n\n    switch (actionURL) {\n      case '/license/add':\n        if (licenseInfo === 'attempt') {\n          auditDesc = formatMessage(holders.attemptedLicenseAdd);\n        } else if (licenseInfo === 'success') {\n          auditDesc = formatMessage(holders.successfullLicenseAdd);\n        } else if (licenseInfo === 'failed - expired or non-started license') {\n          auditDesc = formatMessage(holders.failedExpiredLicenseAdd);\n        } else if (licenseInfo === 'failed - invalid license') {\n          auditDesc = formatMessage(holders.failedInvalidLicenseAdd);\n        }\n\n        break;\n\n      case '/license/remove':\n        auditDesc = formatMessage(holders.licenseRemoved);\n        break;\n\n      default:\n        break;\n    }\n  } else if (actionURL.indexOf('/admin/download_compliance_report') === 0) {\n    auditDesc = Object(utils_utils_jsx__WEBPACK_IMPORTED_MODULE_5__[\"toTitleCase\"])(audit.extra_info);\n  } else {\n    switch (actionURL) {\n      case '/logout':\n        auditDesc = formatMessage(holders.logout);\n        break;\n\n      case '/verify_email':\n        auditDesc = formatMessage(holders.verified);\n        break;\n\n      default:\n        break;\n    }\n  }\n  /* If all else fails... */\n\n\n  if (!auditDesc) {\n    /* Currently not called anywhere */\n    if (audit.extra_info.indexOf('revoked_all=') >= 0) {\n      auditDesc = formatMessage(holders.revokedAll);\n    } else {\n      var actionDesc = '';\n\n      if (actionURL && actionURL.lastIndexOf('/') !== -1) {\n        actionDesc = actionURL.substring(actionURL.lastIndexOf('/') + 1).replace('_', ' ');\n        actionDesc = Object(utils_utils_jsx__WEBPACK_IMPORTED_MODULE_5__[\"toTitleCase\"])(actionDesc);\n      }\n\n      var extraInfoDesc = '';\n\n      if (audit.extra_info) {\n        extraInfoDesc = audit.extra_info;\n\n        if (extraInfoDesc.indexOf('=') !== -1) {\n          extraInfoDesc = extraInfoDesc.substring(extraInfoDesc.indexOf('=') + 1);\n        }\n      }\n\n      auditDesc = actionDesc + ' ' + extraInfoDesc;\n    }\n  }\n\n  var date = new Date(audit.create_at);\n  var auditInfo = {};\n  auditInfo.timestamp = react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(\"div\", null, react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(\"div\", null, react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_intl__WEBPACK_IMPORTED_MODULE_4__[\"FormattedDate\"], {\n    value: date,\n    day: \"2-digit\",\n    month: \"short\",\n    year: \"numeric\"\n  })), react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(\"div\", null, react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_intl__WEBPACK_IMPORTED_MODULE_4__[\"FormattedTime\"], {\n    value: date,\n    hour: \"2-digit\",\n    minute: \"2-digit\"\n  })));\n  auditInfo.userId = audit.user_id;\n  auditInfo.desc = auditDesc;\n  auditInfo.ip = audit.ip_address;\n  auditInfo.sessionId = audit.session_id;\n  return auditInfo;\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jb21wb25lbnRzL2F1ZGl0X3RhYmxlL2F1ZGl0X3RhYmxlLmpzeC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2NvbXBvbmVudHMvYXVkaXRfdGFibGUvYXVkaXRfdGFibGUuanN4PzkxNmEiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IChjKSAyMDE1LXByZXNlbnQgTWF0dGVybW9zdCwgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuLy8gU2VlIExJQ0VOU0UudHh0IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuXG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7ZGVmaW5lTWVzc2FnZXMsIEZvcm1hdHRlZERhdGUsIEZvcm1hdHRlZE1lc3NhZ2UsIEZvcm1hdHRlZFRpbWUsIGluamVjdEludGwsIGludGxTaGFwZX0gZnJvbSAncmVhY3QtaW50bCc7XG5cbmltcG9ydCB7Z2V0RGlyZWN0VGVhbW1hdGUsIGlzU3lzdGVtQWRtaW4sIHRvVGl0bGVDYXNlfSBmcm9tICd1dGlscy91dGlscy5qc3gnO1xuaW1wb3J0IHt0fSBmcm9tICd1dGlscy9pMThuJztcblxuY29uc3QgaG9sZGVycyA9IGRlZmluZU1lc3NhZ2VzKHtcbiAgICBzZXNzaW9uUmV2b2tlZDoge1xuICAgICAgICBpZDogdCgnYXVkaXRfdGFibGUuc2Vzc2lvblJldm9rZWQnKSxcbiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdUaGUgc2Vzc2lvbiB3aXRoIGlkIHtzZXNzaW9uSWR9IHdhcyByZXZva2VkJyxcbiAgICB9LFxuICAgIGNoYW5uZWxDcmVhdGVkOiB7XG4gICAgICAgIGlkOiB0KCdhdWRpdF90YWJsZS5jaGFubmVsQ3JlYXRlZCcpLFxuICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0NyZWF0ZWQgdGhlIHtjaGFubmVsTmFtZX0gY2hhbm5lbCcsXG4gICAgfSxcbiAgICBlc3RhYmxpc2hlZERNOiB7XG4gICAgICAgIGlkOiB0KCdhdWRpdF90YWJsZS5lc3RhYmxpc2hlZERNJyksXG4gICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnRXN0YWJsaXNoZWQgYSBkaXJlY3QgbWVzc2FnZSBjaGFubmVsIHdpdGgge3VzZXJuYW1lfScsXG4gICAgfSxcbiAgICBuYW1lVXBkYXRlZDoge1xuICAgICAgICBpZDogdCgnYXVkaXRfdGFibGUubmFtZVVwZGF0ZWQnKSxcbiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdVcGRhdGVkIHRoZSB7Y2hhbm5lbE5hbWV9IGNoYW5uZWwgbmFtZScsXG4gICAgfSxcbiAgICBoZWFkZXJVcGRhdGVkOiB7XG4gICAgICAgIGlkOiB0KCdhdWRpdF90YWJsZS5oZWFkZXJVcGRhdGVkJyksXG4gICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnVXBkYXRlZCB0aGUge2NoYW5uZWxOYW1lfSBjaGFubmVsIGhlYWRlcicsXG4gICAgfSxcbiAgICBjaGFubmVsRGVsZXRlZDoge1xuICAgICAgICBpZDogdCgnYXVkaXRfdGFibGUuY2hhbm5lbERlbGV0ZWQnKSxcbiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdBcmNoaXZlZCB0aGUgY2hhbm5lbCB3aXRoIHRoZSBVUkwge3VybH0nLFxuICAgIH0sXG4gICAgdXNlckFkZGVkOiB7XG4gICAgICAgIGlkOiB0KCdhdWRpdF90YWJsZS51c2VyQWRkZWQnKSxcbiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdBZGRlZCB7dXNlcm5hbWV9IHRvIHRoZSB7Y2hhbm5lbE5hbWV9IGNoYW5uZWwnLFxuICAgIH0sXG4gICAgdXNlclJlbW92ZWQ6IHtcbiAgICAgICAgaWQ6IHQoJ2F1ZGl0X3RhYmxlLnVzZXJSZW1vdmVkJyksXG4gICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnUmVtb3ZlZCB7dXNlcm5hbWV9IHRvIHRoZSB7Y2hhbm5lbE5hbWV9IGNoYW5uZWwnLFxuICAgIH0sXG4gICAgYXR0ZW1wdGVkUmVnaXN0ZXJBcHA6IHtcbiAgICAgICAgaWQ6IHQoJ2F1ZGl0X3RhYmxlLmF0dGVtcHRlZFJlZ2lzdGVyQXBwJyksXG4gICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnQXR0ZW1wdGVkIHRvIHJlZ2lzdGVyIGEgbmV3IE9BdXRoIEFwcGxpY2F0aW9uIHdpdGggSUQge2lkfScsXG4gICAgfSxcbiAgICBhdHRlbXB0ZWRBbGxvd09BdXRoQWNjZXNzOiB7XG4gICAgICAgIGlkOiB0KCdhdWRpdF90YWJsZS5hdHRlbXB0ZWRBbGxvd09BdXRoQWNjZXNzJyksXG4gICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnQXR0ZW1wdGVkIHRvIGFsbG93IGEgbmV3IE9BdXRoIHNlcnZpY2UgYWNjZXNzJyxcbiAgICB9LFxuICAgIHN1Y2Nlc3NmdWxsT0F1dGhBY2Nlc3M6IHtcbiAgICAgICAgaWQ6IHQoJ2F1ZGl0X3RhYmxlLnN1Y2Nlc3NmdWxsT0F1dGhBY2Nlc3MnKSxcbiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdTdWNjZXNzZnVsbHkgZ2F2ZSBhIG5ldyBPQXV0aCBzZXJ2aWNlIGFjY2VzcycsXG4gICAgfSxcbiAgICBmYWlsZWRPQXV0aEFjY2Vzczoge1xuICAgICAgICBpZDogdCgnYXVkaXRfdGFibGUuZmFpbGVkT0F1dGhBY2Nlc3MnKSxcbiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdGYWlsZWQgdG8gYWxsb3cgYSBuZXcgT0F1dGggc2VydmljZSBhY2Nlc3MgLSB0aGUgcmVkaXJlY3QgVVJJIGRpZCBub3QgbWF0Y2ggdGhlIHByZXZpb3VzbHkgcmVnaXN0ZXJlZCBjYWxsYmFjaycsXG4gICAgfSxcbiAgICBhdHRlbXB0ZWRPQXV0aFRva2VuOiB7XG4gICAgICAgIGlkOiB0KCdhdWRpdF90YWJsZS5hdHRlbXB0ZWRPQXV0aFRva2VuJyksXG4gICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnQXR0ZW1wdGVkIHRvIGdldCBhbiBPQXV0aCBhY2Nlc3MgdG9rZW4nLFxuICAgIH0sXG4gICAgc3VjY2Vzc2Z1bGxPQXV0aFRva2VuOiB7XG4gICAgICAgIGlkOiB0KCdhdWRpdF90YWJsZS5zdWNjZXNzZnVsbE9BdXRoVG9rZW4nKSxcbiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdTdWNjZXNzZnVsbHkgYWRkZWQgYSBuZXcgT0F1dGggc2VydmljZScsXG4gICAgfSxcbiAgICBvYXV0aFRva2VuRmFpbGVkOiB7XG4gICAgICAgIGlkOiB0KCdhdWRpdF90YWJsZS5vYXV0aFRva2VuRmFpbGVkJyksXG4gICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnRmFpbGVkIHRvIGdldCBhbiBPQXV0aCBhY2Nlc3MgdG9rZW4gLSB7dG9rZW59JyxcbiAgICB9LFxuICAgIGF0dGVtcHRlZExvZ2luOiB7XG4gICAgICAgIGlkOiB0KCdhdWRpdF90YWJsZS5hdHRlbXB0ZWRMb2dpbicpLFxuICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0F0dGVtcHRlZCB0byBsb2dpbicsXG4gICAgfSxcbiAgICBhdXRoZW50aWNhdGVkOiB7XG4gICAgICAgIGlkOiB0KCdhdWRpdF90YWJsZS5hdXRoZW50aWNhdGVkJyksXG4gICAgICAgIGRlZmF1bGVNZXNzYWdlOiAnU3VjY2Vzc2Z1bGx5IGF1dGhlbnRpY2F0ZWQnLFxuICAgIH0sXG4gICAgc3VjY2Vzc2Z1bGxMb2dpbjoge1xuICAgICAgICBpZDogdCgnYXVkaXRfdGFibGUuc3VjY2Vzc2Z1bGxMb2dpbicpLFxuICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1N1Y2Nlc3NmdWxseSBsb2dnZWQgaW4nLFxuICAgIH0sXG4gICAgZmFpbGVkTG9naW46IHtcbiAgICAgICAgaWQ6IHQoJ2F1ZGl0X3RhYmxlLmZhaWxlZExvZ2luJyksXG4gICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnRkFJTEVEIGxvZ2luIGF0dGVtcHQnLFxuICAgIH0sXG4gICAgdXBkYXRlUGljdHVyZToge1xuICAgICAgICBpZDogdCgnYXVkaXRfdGFibGUudXBkYXRlUGljdHVyZScpLFxuICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1VwZGF0ZWQgeW91ciBwcm9maWxlIHBpY3R1cmUnLFxuICAgIH0sXG4gICAgdXBkYXRlR2VuZXJhbDoge1xuICAgICAgICBpZDogdCgnYXVkaXRfdGFibGUudXBkYXRlR2VuZXJhbCcpLFxuICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1VwZGF0ZWQgdGhlIGdlbmVyYWwgc2V0dGluZ3Mgb2YgeW91ciBhY2NvdW50JyxcbiAgICB9LFxuICAgIGF0dGVtcHRlZFBhc3N3b3JkOiB7XG4gICAgICAgIGlkOiB0KCdhdWRpdF90YWJsZS5hdHRlbXB0ZWRQYXNzd29yZCcpLFxuICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0F0dGVtcHRlZCB0byBjaGFuZ2UgcGFzc3dvcmQnLFxuICAgIH0sXG4gICAgc3VjY2Vzc2Z1bGxQYXNzd29yZDoge1xuICAgICAgICBpZDogdCgnYXVkaXRfdGFibGUuc3VjY2Vzc2Z1bGxQYXNzd29yZCcpLFxuICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1N1Y2Nlc3NmdWxseSBjaGFuZ2VkIHBhc3N3b3JkJyxcbiAgICB9LFxuICAgIGZhaWxlZFBhc3N3b3JkOiB7XG4gICAgICAgIGlkOiB0KCdhdWRpdF90YWJsZS5mYWlsZWRQYXNzd29yZCcpLFxuICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0ZhaWxlZCB0byBjaGFuZ2UgcGFzc3dvcmQgLSB0cmllZCB0byB1cGRhdGUgdXNlciBwYXNzd29yZCB3aG8gd2FzIGxvZ2dlZCBpbiB0aHJvdWdoIE9BdXRoJyxcbiAgICB9LFxuICAgIHVwZGF0ZWRSb2w6IHtcbiAgICAgICAgaWQ6IHQoJ2F1ZGl0X3RhYmxlLnVwZGF0ZWRSb2wnKSxcbiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdVcGRhdGVkIHVzZXIgcm9sZShzKSB0byAnLFxuICAgIH0sXG4gICAgbWVtYmVyOiB7XG4gICAgICAgIGlkOiB0KCdhdWRpdF90YWJsZS5tZW1iZXInKSxcbiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdtZW1iZXInLFxuICAgIH0sXG4gICAgYWNjb3VudEFjdGl2ZToge1xuICAgICAgICBpZDogdCgnYXVkaXRfdGFibGUuYWNjb3VudEFjdGl2ZScpLFxuICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0FjY291bnQgYWN0aXZhdGVkJyxcbiAgICB9LFxuICAgIGFjY291bnRJbmFjdGl2ZToge1xuICAgICAgICBpZDogdCgnYXVkaXRfdGFibGUuYWNjb3VudEluYWN0aXZlJyksXG4gICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnQWNjb3VudCBkZWFjdGl2YXRlZCcsXG4gICAgfSxcbiAgICBieToge1xuICAgICAgICBpZDogdCgnYXVkaXRfdGFibGUuYnknKSxcbiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICcgYnkge3VzZXJuYW1lfScsXG4gICAgfSxcbiAgICBieUFkbWluOiB7XG4gICAgICAgIGlkOiB0KCdhdWRpdF90YWJsZS5ieUFkbWluJyksXG4gICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnIGJ5IGFuIGFkbWluJyxcbiAgICB9LFxuICAgIHNlbnRFbWFpbDoge1xuICAgICAgICBpZDogdCgnYXVkaXRfdGFibGUuc2VudEVtYWlsJyksXG4gICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnU2VudCBhbiBlbWFpbCB0byB7ZW1haWx9IHRvIHJlc2V0IHlvdXIgcGFzc3dvcmQnLFxuICAgIH0sXG4gICAgYXR0ZW1wdGVkUmVzZXQ6IHtcbiAgICAgICAgaWQ6IHQoJ2F1ZGl0X3RhYmxlLmF0dGVtcHRlZFJlc2V0JyksXG4gICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnQXR0ZW1wdGVkIHRvIHJlc2V0IHBhc3N3b3JkJyxcbiAgICB9LFxuICAgIHN1Y2Nlc3NmdWxsUmVzZXQ6IHtcbiAgICAgICAgaWQ6IHQoJ2F1ZGl0X3RhYmxlLnN1Y2Nlc3NmdWxsUmVzZXQnKSxcbiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdTdWNjZXNzZnVsbHkgcmVzZXQgcGFzc3dvcmQnLFxuICAgIH0sXG4gICAgdXBkYXRlR2xvYmFsTm90aWZpY2F0aW9uczoge1xuICAgICAgICBpZDogdCgnYXVkaXRfdGFibGUudXBkYXRlR2xvYmFsTm90aWZpY2F0aW9ucycpLFxuICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1VwZGF0ZWQgeW91ciBnbG9iYWwgbm90aWZpY2F0aW9uIHNldHRpbmdzJyxcbiAgICB9LFxuICAgIGF0dGVtcHRlZFdlYmhvb2tDcmVhdGU6IHtcbiAgICAgICAgaWQ6IHQoJ2F1ZGl0X3RhYmxlLmF0dGVtcHRlZFdlYmhvb2tDcmVhdGUnKSxcbiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdBdHRlbXB0ZWQgdG8gY3JlYXRlIGEgd2ViaG9vaycsXG4gICAgfSxcbiAgICBzdWNjY2Vzc2Z1bGxXZWJob29rQ3JlYXRlOiB7XG4gICAgICAgIGlkOiB0KCdhdWRpdF90YWJsZS5zdWNjZXNzZnVsbFdlYmhvb2tDcmVhdGUnKSxcbiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdTdWNjZXNzZnVsbHkgY3JlYXRlZCBhIHdlYmhvb2snLFxuICAgIH0sXG4gICAgZmFpbGVkV2ViaG9va0NyZWF0ZToge1xuICAgICAgICBpZDogdCgnYXVkaXRfdGFibGUuZmFpbGVkV2ViaG9va0NyZWF0ZScpLFxuICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0ZhaWxlZCB0byBjcmVhdGUgYSB3ZWJob29rIC0gYmFkIGNoYW5uZWwgcGVybWlzc2lvbnMnLFxuICAgIH0sXG4gICAgYXR0ZW1wdGVkV2ViaG9va0RlbGV0ZToge1xuICAgICAgICBpZDogdCgnYXVkaXRfdGFibGUuYXR0ZW1wdGVkV2ViaG9va0RlbGV0ZScpLFxuICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0F0dGVtcHRlZCB0byBkZWxldGUgYSB3ZWJob29rJyxcbiAgICB9LFxuICAgIHN1Y2Nlc3NmdWxsV2ViaG9va0RlbGV0ZToge1xuICAgICAgICBpZDogdCgnYXVkaXRfdGFibGUuc3VjY2Vzc2Z1bGxXZWJob29rRGVsZXRlJyksXG4gICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnU3VjY2Vzc2Z1bGx5IGRlbGV0ZWQgYSB3ZWJob29rJyxcbiAgICB9LFxuICAgIGZhaWxlZFdlYmhvb2tEZWxldGU6IHtcbiAgICAgICAgaWQ6IHQoJ2F1ZGl0X3RhYmxlLmZhaWxlZFdlYmhvb2tEZWxldGUnKSxcbiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdGYWlsZWQgdG8gZGVsZXRlIGEgd2ViaG9vayAtIGluYXBwcm9wcmlhdGUgY29uZGl0aW9ucycsXG4gICAgfSxcbiAgICBsb2dvdXQ6IHtcbiAgICAgICAgaWQ6IHQoJ2F1ZGl0X3RhYmxlLmxvZ291dCcpLFxuICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0xvZ2dlZCBvdXQgb2YgeW91ciBhY2NvdW50JyxcbiAgICB9LFxuICAgIHZlcmlmaWVkOiB7XG4gICAgICAgIGlkOiB0KCdhdWRpdF90YWJsZS52ZXJpZmllZCcpLFxuICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1N1Y2Nlc3NmdWxseSB2ZXJpZmllZCB5b3VyIGVtYWlsIGFkZHJlc3MnLFxuICAgIH0sXG4gICAgcmV2b2tlZEFsbDoge1xuICAgICAgICBpZDogdCgnYXVkaXRfdGFibGUucmV2b2tlZEFsbCcpLFxuICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1Jldm9rZWQgYWxsIGN1cnJlbnQgc2Vzc2lvbnMgZm9yIHRoZSB0ZWFtJyxcbiAgICB9LFxuICAgIGxvZ2luQXR0ZW1wdDoge1xuICAgICAgICBpZDogdCgnYXVkaXRfdGFibGUubG9naW5BdHRlbXB0JyksXG4gICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnIChMb2dpbiBhdHRlbXB0KScsXG4gICAgfSxcbiAgICBsb2dpbkZhaWx1cmU6IHtcbiAgICAgICAgaWQ6IHQoJ2F1ZGl0X3RhYmxlLmxvZ2luRmFpbHVyZScpLFxuICAgICAgICBkZWZhdWx0TWVzc2FnZTogJyAoTG9naW4gZmFpbHVyZSknLFxuICAgIH0sXG4gICAgYXR0ZW1wdGVkTGljZW5zZUFkZDoge1xuICAgICAgICBpZDogdCgnYXVkaXRfdGFibGUuYXR0ZW1wdGVkTGljZW5zZUFkZCcpLFxuICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0F0dGVtcHRlZCB0byBhZGQgbmV3IGxpY2Vuc2UnLFxuICAgIH0sXG4gICAgc3VjY2Vzc2Z1bGxMaWNlbnNlQWRkOiB7XG4gICAgICAgIGlkOiB0KCdhdWRpdF90YWJsZS5zdWNjZXNzZnVsbExpY2Vuc2VBZGQnKSxcbiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdTdWNjZXNzZnVsbHkgYWRkZWQgbmV3IGxpY2Vuc2UnLFxuICAgIH0sXG4gICAgZmFpbGVkRXhwaXJlZExpY2Vuc2VBZGQ6IHtcbiAgICAgICAgaWQ6IHQoJ2F1ZGl0X3RhYmxlLmZhaWxlZEV4cGlyZWRMaWNlbnNlQWRkJyksXG4gICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnRmFpbGVkIHRvIGFkZCBhIG5ldyBsaWNlbnNlIGFzIGl0IGhhcyBlaXRoZXIgZXhwaXJlZCBvciBub3QgeWV0IGJlZW4gc3RhcnRlZCcsXG4gICAgfSxcbiAgICBmYWlsZWRJbnZhbGlkTGljZW5zZUFkZDoge1xuICAgICAgICBpZDogdCgnYXVkaXRfdGFibGUuZmFpbGVkSW52YWxpZExpY2Vuc2VBZGQnKSxcbiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdGYWlsZWQgdG8gYWRkIGFuIGludmFsaWQgbGljZW5zZScsXG4gICAgfSxcbiAgICBsaWNlbnNlUmVtb3ZlZDoge1xuICAgICAgICBpZDogdCgnYXVkaXRfdGFibGUubGljZW5zZVJlbW92ZWQnKSxcbiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdTdWNjZXNzZnVsbHkgcmVtb3ZlZCBhIGxpY2Vuc2UnLFxuICAgIH0sXG59KTtcblxuZnVuY3Rpb24gQXVkaXRUYWJsZShwcm9wcykge1xuICAgIHZhciBhY2Nlc3NMaXN0ID0gW107XG5cbiAgICBjb25zdCB7Zm9ybWF0TWVzc2FnZX0gPSBwcm9wcy5pbnRsO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMuYXVkaXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGF1ZGl0ID0gcHJvcHMuYXVkaXRzW2ldO1xuICAgICAgICBjb25zdCBhdWRpdEluZm8gPSBmb3JtYXRBdWRpdEluZm8oYXVkaXQsIGZvcm1hdE1lc3NhZ2UsIHByb3BzLmN1cnJlbnRVc2VyLCBwcm9wcy5nZXRCeU5hbWUsIHByb3BzLmdldFVzZXIpO1xuXG4gICAgICAgIGxldCB1Q29udGVudDtcbiAgICAgICAgaWYgKHByb3BzLnNob3dVc2VySWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHByb2ZpbGUgPSBwcm9wcy5nZXRVc2VyKGF1ZGl0SW5mby51c2VySWQpO1xuICAgICAgICAgICAgY29uc3QgZGF0YSA9IHByb2ZpbGUgPyBwcm9maWxlLmVtYWlsIDogYXVkaXRJbmZvLnVzZXJJZDtcbiAgICAgICAgICAgIHVDb250ZW50ID0gPHRkIGNsYXNzTmFtZT0nd29yZC1icmVhay0tYWxsJz57ZGF0YX08L3RkPjtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBpQ29udGVudDtcbiAgICAgICAgaWYgKHByb3BzLnNob3dJcCkge1xuICAgICAgICAgICAgaUNvbnRlbnQgPSA8dGQgY2xhc3NOYW1lPSd3aGl0ZXNwYWNlLS1ub3dyYXAgd29yZC1icmVhay0tYWxsJz57YXVkaXRJbmZvLmlwfTwvdGQ+O1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHNDb250ZW50O1xuICAgICAgICBpZiAocHJvcHMuc2hvd1Nlc3Npb24pIHtcbiAgICAgICAgICAgIHNDb250ZW50ID0gPHRkIGNsYXNzTmFtZT0nd2hpdGVzcGFjZS0tbm93cmFwIHdvcmQtYnJlYWstLWFsbCc+e2F1ZGl0SW5mby5zZXNzaW9uSWR9PC90ZD47XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgZGVzY1N0eWxlID0gJyc7XG4gICAgICAgIGlmIChhdWRpdEluZm8uZGVzYy50b0xvd2VyQ2FzZSgpLmluZGV4T2YoJ2ZhaWwnKSAhPT0gLTEpIHtcbiAgICAgICAgICAgIGRlc2NTdHlsZSA9ICcgY29sb3ItLWVycm9yJztcbiAgICAgICAgfVxuXG4gICAgICAgIGFjY2Vzc0xpc3RbaV0gPSAoXG4gICAgICAgICAgICA8dHIga2V5PXthdWRpdC5pZH0+XG4gICAgICAgICAgICAgICAgPHRkIGNsYXNzTmFtZT0nd2hpdGVzcGFjZS0tbm93cmFwIHdvcmQtYnJlYWstLWFsbCc+e2F1ZGl0SW5mby50aW1lc3RhbXB9PC90ZD5cbiAgICAgICAgICAgICAgICB7dUNvbnRlbnR9XG4gICAgICAgICAgICAgICAgPHRkXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17J3dvcmQtYnJlYWstLWFsbCcgKyBkZXNjU3R5bGV9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICB7YXVkaXRJbmZvLmRlc2N9XG4gICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICB7aUNvbnRlbnR9XG4gICAgICAgICAgICAgICAge3NDb250ZW50fVxuICAgICAgICAgICAgPC90cj5cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBsZXQgdXNlcklkQ29udGVudDtcbiAgICBpZiAocHJvcHMuc2hvd1VzZXJJZCkge1xuICAgICAgICB1c2VySWRDb250ZW50ID0gKFxuICAgICAgICAgICAgPHRoPlxuICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgIGlkPSdhdWRpdF90YWJsZS51c2VySWQnXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdVc2VyIElEJ1xuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L3RoPlxuICAgICAgICApO1xuICAgIH1cblxuICAgIGxldCBpcENvbnRlbnQ7XG4gICAgaWYgKHByb3BzLnNob3dJcCkge1xuICAgICAgICBpcENvbnRlbnQgPSAoXG4gICAgICAgICAgICA8dGg+XG4gICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgaWQ9J2F1ZGl0X3RhYmxlLmlwJ1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nSVAgQWRkcmVzcydcbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC90aD5cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBsZXQgc2Vzc2lvbkNvbnRlbnQ7XG4gICAgaWYgKHByb3BzLnNob3dTZXNzaW9uKSB7XG4gICAgICAgIHNlc3Npb25Db250ZW50ID0gKFxuICAgICAgICAgICAgPHRoPlxuICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgIGlkPSdhdWRpdF90YWJsZS5zZXNzaW9uJ1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nU2Vzc2lvbiBJRCdcbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC90aD5cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgICA8dGFibGUgY2xhc3NOYW1lPSd0YWJsZSc+XG4gICAgICAgICAgICA8dGhlYWQ+XG4gICAgICAgICAgICAgICAgPHRyPlxuICAgICAgICAgICAgICAgICAgICA8dGg+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdhdWRpdF90YWJsZS50aW1lc3RhbXAnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J1RpbWVzdGFtcCdcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvdGg+XG4gICAgICAgICAgICAgICAgICAgIHt1c2VySWRDb250ZW50fVxuICAgICAgICAgICAgICAgICAgICA8dGg+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdhdWRpdF90YWJsZS5hY3Rpb24nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0FjdGlvbidcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvdGg+XG4gICAgICAgICAgICAgICAgICAgIHtpcENvbnRlbnR9XG4gICAgICAgICAgICAgICAgICAgIHtzZXNzaW9uQ29udGVudH1cbiAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgPC90aGVhZD5cbiAgICAgICAgICAgIDx0Ym9keT5cbiAgICAgICAgICAgICAgICB7YWNjZXNzTGlzdH1cbiAgICAgICAgICAgIDwvdGJvZHk+XG4gICAgICAgIDwvdGFibGU+XG4gICAgKTtcbn1cblxuQXVkaXRUYWJsZS5wcm9wVHlwZXMgPSB7XG4gICAgaW50bDogaW50bFNoYXBlLmlzUmVxdWlyZWQsXG4gICAgYXVkaXRzOiBQcm9wVHlwZXMuYXJyYXkuaXNSZXF1aXJlZCxcbiAgICBzaG93VXNlcklkOiBQcm9wVHlwZXMuYm9vbCxcbiAgICBzaG93SXA6IFByb3BUeXBlcy5ib29sLFxuICAgIHNob3dTZXNzaW9uOiBQcm9wVHlwZXMuYm9vbCxcbiAgICBjdXJyZW50VXNlcjogUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkLFxuICAgIGdldFVzZXI6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gICAgZ2V0QnlOYW1lOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxufTtcblxuZXhwb3J0IGRlZmF1bHQgaW5qZWN0SW50bChBdWRpdFRhYmxlKTtcblxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdEF1ZGl0SW5mbyhhdWRpdCwgZm9ybWF0TWVzc2FnZSwgY3VycmVudFVzZXIsIGdldEJ5TmFtZSwgZ2V0VXNlcikge1xuICAgIGNvbnN0IGFjdGlvblVSTCA9IGF1ZGl0LmFjdGlvbi5yZXBsYWNlKC9cXC9hcGlcXC92WzEtOV0vLCAnJyk7XG4gICAgbGV0IGF1ZGl0RGVzYyA9ICcnO1xuXG4gICAgaWYgKGFjdGlvblVSTC5pbmRleE9mKCcvY2hhbm5lbHMnKSA9PT0gMCkge1xuICAgICAgICBjb25zdCBjaGFubmVsSW5mbyA9IGF1ZGl0LmV4dHJhX2luZm8uc3BsaXQoJyAnKTtcbiAgICAgICAgY29uc3QgY2hhbm5lbE5hbWVGaWVsZCA9IGNoYW5uZWxJbmZvWzBdLnNwbGl0KCc9Jyk7XG5cbiAgICAgICAgbGV0IGNoYW5uZWxVUkwgPSAnJztcbiAgICAgICAgbGV0IGNoYW5uZWxPYmo7XG4gICAgICAgIGxldCBjaGFubmVsTmFtZSA9ICcnO1xuICAgICAgICBpZiAoY2hhbm5lbE5hbWVGaWVsZC5pbmRleE9mKCduYW1lJykgPj0gMCkge1xuICAgICAgICAgICAgY2hhbm5lbFVSTCA9IGNoYW5uZWxOYW1lRmllbGRbY2hhbm5lbE5hbWVGaWVsZC5pbmRleE9mKCduYW1lJykgKyAxXTtcbiAgICAgICAgICAgIGNoYW5uZWxPYmogPSBnZXRCeU5hbWUoY2hhbm5lbFVSTCk7XG4gICAgICAgICAgICBpZiAoY2hhbm5lbE9iaikge1xuICAgICAgICAgICAgICAgIGNoYW5uZWxOYW1lID0gY2hhbm5lbE9iai5kaXNwbGF5X25hbWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNoYW5uZWxOYW1lID0gY2hhbm5lbFVSTDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHN3aXRjaCAoYWN0aW9uVVJMKSB7XG4gICAgICAgIGNhc2UgJy9jaGFubmVscy9jcmVhdGUnOlxuICAgICAgICAgICAgYXVkaXREZXNjID0gZm9ybWF0TWVzc2FnZShob2xkZXJzLmNoYW5uZWxDcmVhdGVkLCB7Y2hhbm5lbE5hbWV9KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICcvY2hhbm5lbHMvY3JlYXRlX2RpcmVjdCc6XG4gICAgICAgICAgICBhdWRpdERlc2MgPSBmb3JtYXRNZXNzYWdlKGhvbGRlcnMuZXN0YWJsaXNoZWRETSwge3VzZXJuYW1lOiBnZXREaXJlY3RUZWFtbWF0ZShjaGFubmVsT2JqLmlkKS51c2VybmFtZX0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJy9jaGFubmVscy91cGRhdGUnOlxuICAgICAgICAgICAgYXVkaXREZXNjID0gZm9ybWF0TWVzc2FnZShob2xkZXJzLm5hbWVVcGRhdGVkLCB7Y2hhbm5lbE5hbWV9KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICcvY2hhbm5lbHMvdXBkYXRlX2Rlc2MnOiAvLyBzdXBwb3J0IHRoZSBvbGQgcGF0aFxuICAgICAgICBjYXNlICcvY2hhbm5lbHMvdXBkYXRlX2hlYWRlcic6XG4gICAgICAgICAgICBhdWRpdERlc2MgPSBmb3JtYXRNZXNzYWdlKGhvbGRlcnMuaGVhZGVyVXBkYXRlZCwge2NoYW5uZWxOYW1lfSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgbGV0IHVzZXJJZEZpZWxkID0gW107XG4gICAgICAgICAgICBsZXQgdXNlcklkID0gJyc7XG4gICAgICAgICAgICBsZXQgdXNlcm5hbWUgPSAnJztcblxuICAgICAgICAgICAgaWYgKGNoYW5uZWxJbmZvWzFdKSB7XG4gICAgICAgICAgICAgICAgdXNlcklkRmllbGQgPSBjaGFubmVsSW5mb1sxXS5zcGxpdCgnPScpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHVzZXJJZEZpZWxkLmluZGV4T2YoJ3VzZXJfaWQnKSA+PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHVzZXJJZCA9IHVzZXJJZEZpZWxkW3VzZXJJZEZpZWxkLmluZGV4T2YoJ3VzZXJfaWQnKSArIDFdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcHJvZmlsZSA9IGdldFVzZXIodXNlcklkKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb2ZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lID0gcHJvZmlsZS51c2VybmFtZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCgvXFwvY2hhbm5lbHNcXC9bQS1aYS16MC05XStcXC9kZWxldGUvKS50ZXN0KGFjdGlvblVSTCkpIHtcbiAgICAgICAgICAgICAgICBhdWRpdERlc2MgPSBmb3JtYXRNZXNzYWdlKGhvbGRlcnMuY2hhbm5lbERlbGV0ZWQsIHt1cmw6IGNoYW5uZWxVUkx9KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoKC9cXC9jaGFubmVsc1xcL1tBLVphLXowLTldK1xcL2FkZC8pLnRlc3QoYWN0aW9uVVJMKSkge1xuICAgICAgICAgICAgICAgIGF1ZGl0RGVzYyA9IGZvcm1hdE1lc3NhZ2UoaG9sZGVycy51c2VyQWRkZWQsIHt1c2VybmFtZSwgY2hhbm5lbE5hbWV9KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoKC9cXC9jaGFubmVsc1xcL1tBLVphLXowLTldK1xcL3JlbW92ZS8pLnRlc3QoYWN0aW9uVVJMKSkge1xuICAgICAgICAgICAgICAgIGF1ZGl0RGVzYyA9IGZvcm1hdE1lc3NhZ2UoaG9sZGVycy51c2VyUmVtb3ZlZCwge3VzZXJuYW1lLCBjaGFubmVsTmFtZX0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSBlbHNlIGlmIChhY3Rpb25VUkwuaW5kZXhPZignL29hdXRoJykgPT09IDApIHtcbiAgICAgICAgY29uc3Qgb2F1dGhJbmZvID0gYXVkaXQuZXh0cmFfaW5mby5zcGxpdCgnICcpO1xuXG4gICAgICAgIHN3aXRjaCAoYWN0aW9uVVJMKSB7XG4gICAgICAgIGNhc2UgJy9vYXV0aC9yZWdpc3Rlcic6IHtcbiAgICAgICAgICAgIGNvbnN0IGNsaWVudElkRmllbGQgPSBvYXV0aEluZm9bMF0uc3BsaXQoJz0nKTtcblxuICAgICAgICAgICAgaWYgKGNsaWVudElkRmllbGRbMF0gPT09ICdjbGllbnRfaWQnKSB7XG4gICAgICAgICAgICAgICAgYXVkaXREZXNjID0gZm9ybWF0TWVzc2FnZShob2xkZXJzLmF0dGVtcHRlZFJlZ2lzdGVyQXBwLCB7aWQ6IGNsaWVudElkRmllbGRbMV19KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAnL29hdXRoL2FsbG93JzpcbiAgICAgICAgICAgIGlmIChvYXV0aEluZm9bMF0gPT09ICdhdHRlbXB0Jykge1xuICAgICAgICAgICAgICAgIGF1ZGl0RGVzYyA9IGZvcm1hdE1lc3NhZ2UoaG9sZGVycy5hdHRlbXB0ZWRBbGxvd09BdXRoQWNjZXNzKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAob2F1dGhJbmZvWzBdID09PSAnc3VjY2VzcycpIHtcbiAgICAgICAgICAgICAgICBhdWRpdERlc2MgPSBmb3JtYXRNZXNzYWdlKGhvbGRlcnMuc3VjY2Vzc2Z1bGxPQXV0aEFjY2Vzcyk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG9hdXRoSW5mb1swXSA9PT0gJ2ZhaWwgLSByZWRpcmVjdF91cmkgZGlkIG5vdCBtYXRjaCByZWdpc3RlcmVkIGNhbGxiYWNrJykge1xuICAgICAgICAgICAgICAgIGF1ZGl0RGVzYyA9IGZvcm1hdE1lc3NhZ2UoaG9sZGVycy5mYWlsZWRPQXV0aEFjY2Vzcyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICcvb2F1dGgvYWNjZXNzX3Rva2VuJzpcbiAgICAgICAgICAgIGlmIChvYXV0aEluZm9bMF0gPT09ICdhdHRlbXB0Jykge1xuICAgICAgICAgICAgICAgIGF1ZGl0RGVzYyA9IGZvcm1hdE1lc3NhZ2UoaG9sZGVycy5hdHRlbXB0ZWRPQXV0aFRva2VuKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAob2F1dGhJbmZvWzBdID09PSAnc3VjY2VzcycpIHtcbiAgICAgICAgICAgICAgICBhdWRpdERlc2MgPSBmb3JtYXRNZXNzYWdlKGhvbGRlcnMuc3VjY2Vzc2Z1bGxPQXV0aFRva2VuKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgb2F1dGhUb2tlbkZhaWx1cmUgPSBvYXV0aEluZm9bMF0uc3BsaXQoJy0nKTtcblxuICAgICAgICAgICAgICAgIGlmIChvYXV0aFRva2VuRmFpbHVyZVswXS50cmltKCkgPT09ICdmYWlsJyAmJiBvYXV0aFRva2VuRmFpbHVyZVsxXSkge1xuICAgICAgICAgICAgICAgICAgICBhdWRpdERlc2MgPSBmb3JtYXRNZXNzYWdlKG9hdXRoVG9rZW5GYWlsdXJlLCB7dG9rZW46IG9hdXRoVG9rZW5GYWlsdXJlWzFdLnRyaW0oKX0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH0gZWxzZSBpZiAoYWN0aW9uVVJMLmluZGV4T2YoJy91c2VycycpID09PSAwKSB7XG4gICAgICAgIGNvbnN0IHVzZXJJbmZvID0gYXVkaXQuZXh0cmFfaW5mby5zcGxpdCgnICcpO1xuXG4gICAgICAgIHN3aXRjaCAoYWN0aW9uVVJMKSB7XG4gICAgICAgIGNhc2UgJy91c2Vycy9sb2dpbic6XG4gICAgICAgICAgICBpZiAodXNlckluZm9bMF0gPT09ICdhdHRlbXB0Jykge1xuICAgICAgICAgICAgICAgIGF1ZGl0RGVzYyA9IGZvcm1hdE1lc3NhZ2UoaG9sZGVycy5hdHRlbXB0ZWRMb2dpbik7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHVzZXJJbmZvWzBdID09PSAnc3VjY2VzcycpIHtcbiAgICAgICAgICAgICAgICBhdWRpdERlc2MgPSBmb3JtYXRNZXNzYWdlKGhvbGRlcnMuc3VjY2Vzc2Z1bGxMb2dpbik7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHVzZXJJbmZvWzBdID09PSAnYXV0aGVudGljYXRlZCcpIHtcbiAgICAgICAgICAgICAgICBhdWRpdERlc2MgPSBmb3JtYXRNZXNzYWdlKGhvbGRlcnMuYXV0aGVudGljYXRlZCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHVzZXJJbmZvWzBdKSB7XG4gICAgICAgICAgICAgICAgYXVkaXREZXNjID0gZm9ybWF0TWVzc2FnZShob2xkZXJzLmZhaWxlZExvZ2luKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJy91c2Vycy9yZXZva2Vfc2Vzc2lvbic6XG4gICAgICAgICAgICBhdWRpdERlc2MgPSBmb3JtYXRNZXNzYWdlKGhvbGRlcnMuc2Vzc2lvblJldm9rZWQsIHtzZXNzaW9uSWQ6IHVzZXJJbmZvWzBdLnNwbGl0KCc9JylbMV19KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICcvdXNlcnMvbmV3aW1hZ2UnOlxuICAgICAgICAgICAgYXVkaXREZXNjID0gZm9ybWF0TWVzc2FnZShob2xkZXJzLnVwZGF0ZVBpY3R1cmUpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJy91c2Vycy91cGRhdGUnOlxuICAgICAgICAgICAgYXVkaXREZXNjID0gZm9ybWF0TWVzc2FnZShob2xkZXJzLnVwZGF0ZUdlbmVyYWwpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJy91c2Vycy9uZXdwYXNzd29yZCc6XG4gICAgICAgICAgICBpZiAodXNlckluZm9bMF0gPT09ICdhdHRlbXB0ZWQnKSB7XG4gICAgICAgICAgICAgICAgYXVkaXREZXNjID0gZm9ybWF0TWVzc2FnZShob2xkZXJzLmF0dGVtcHRlZFBhc3N3b3JkKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodXNlckluZm9bMF0gPT09ICdjb21wbGV0ZWQnKSB7XG4gICAgICAgICAgICAgICAgYXVkaXREZXNjID0gZm9ybWF0TWVzc2FnZShob2xkZXJzLnN1Y2Nlc3NmdWxsUGFzc3dvcmQpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh1c2VySW5mb1swXSA9PT0gJ2ZhaWxlZCAtIHRyaWVkIHRvIHVwZGF0ZSB1c2VyIHBhc3N3b3JkIHdobyB3YXMgbG9nZ2VkIGluIHRocm91Z2ggb2F1dGgnKSB7XG4gICAgICAgICAgICAgICAgYXVkaXREZXNjID0gZm9ybWF0TWVzc2FnZShob2xkZXJzLmZhaWxlZFBhc3N3b3JkKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJy91c2Vycy91cGRhdGVfcm9sZXMnOiB7XG4gICAgICAgICAgICBjb25zdCB1c2VyUm9sZXMgPSB1c2VySW5mb1swXS5zcGxpdCgnPScpWzFdO1xuXG4gICAgICAgICAgICBhdWRpdERlc2MgPSBmb3JtYXRNZXNzYWdlKGhvbGRlcnMudXBkYXRlZFJvbCk7XG4gICAgICAgICAgICBpZiAodXNlclJvbGVzLnRyaW0oKSkge1xuICAgICAgICAgICAgICAgIGF1ZGl0RGVzYyArPSB1c2VyUm9sZXM7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGF1ZGl0RGVzYyArPSBmb3JtYXRNZXNzYWdlKGhvbGRlcnMubWVtYmVyKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAnL3VzZXJzL3VwZGF0ZV9hY3RpdmUnOiB7XG4gICAgICAgICAgICBjb25zdCB1cGRhdGVUeXBlID0gdXNlckluZm9bMF0uc3BsaXQoJz0nKVswXTtcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZUZpZWxkID0gdXNlckluZm9bMF0uc3BsaXQoJz0nKVsxXTtcblxuICAgICAgICAgICAgLyogRWl0aGVyIGRlc2NyaWJlcyBhY2NvdW50IGFjdGl2YXRpb24vZGVhY3RpdmF0aW9uIG9yIGEgcmV2b2tlZCBzZXNzaW9uIGFzIHBhcnQgb2YgYW4gYWNjb3VudCBkZWFjdGl2YXRpb24gKi9cbiAgICAgICAgICAgIGlmICh1cGRhdGVUeXBlID09PSAnYWN0aXZlJykge1xuICAgICAgICAgICAgICAgIGlmICh1cGRhdGVGaWVsZCA9PT0gJ3RydWUnKSB7XG4gICAgICAgICAgICAgICAgICAgIGF1ZGl0RGVzYyA9IGZvcm1hdE1lc3NhZ2UoaG9sZGVycy5hY2NvdW50QWN0aXZlKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHVwZGF0ZUZpZWxkID09PSAnZmFsc2UnKSB7XG4gICAgICAgICAgICAgICAgICAgIGF1ZGl0RGVzYyA9IGZvcm1hdE1lc3NhZ2UoaG9sZGVycy5hY2NvdW50SW5hY3RpdmUpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnN0IGFjdGluZ1VzZXJJbmZvID0gdXNlckluZm9bMV0uc3BsaXQoJz0nKTtcbiAgICAgICAgICAgICAgICBpZiAoYWN0aW5nVXNlckluZm9bMF0gPT09ICdzZXNzaW9uX3VzZXInKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFjdGluZ1VzZXIgPSBnZXRVc2VyKGFjdGluZ1VzZXJJbmZvWzFdKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdXNlciA9IGN1cnJlbnRVc2VyO1xuICAgICAgICAgICAgICAgICAgICBpZiAodXNlciAmJiBhY3RpbmdVc2VyICYmIGlzU3lzdGVtQWRtaW4odXNlci5yb2xlcykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF1ZGl0RGVzYyArPSBmb3JtYXRNZXNzYWdlKGhvbGRlcnMuYnksIHt1c2VybmFtZTogYWN0aW5nVXNlci51c2VybmFtZX0pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHVzZXIgJiYgYWN0aW5nVXNlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXVkaXREZXNjICs9IGZvcm1hdE1lc3NhZ2UoaG9sZGVycy5ieUFkbWluKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAodXBkYXRlVHlwZSA9PT0gJ3Nlc3Npb25faWQnKSB7XG4gICAgICAgICAgICAgICAgYXVkaXREZXNjID0gZm9ybWF0TWVzc2FnZShob2xkZXJzLnNlc3Npb25SZXZva2VkLCB7c2Vzc2lvbklkOiB1cGRhdGVGaWVsZH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlICcvdXNlcnMvc2VuZF9wYXNzd29yZF9yZXNldCc6XG4gICAgICAgICAgICBhdWRpdERlc2MgPSBmb3JtYXRNZXNzYWdlKGhvbGRlcnMuc2VudEVtYWlsLCB7ZW1haWw6IHVzZXJJbmZvWzBdLnNwbGl0KCc9JylbMV19KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICcvdXNlcnMvcmVzZXRfcGFzc3dvcmQnOlxuICAgICAgICAgICAgaWYgKHVzZXJJbmZvWzBdID09PSAnYXR0ZW1wdCcpIHtcbiAgICAgICAgICAgICAgICBhdWRpdERlc2MgPSBmb3JtYXRNZXNzYWdlKGhvbGRlcnMuYXR0ZW1wdGVkUmVzZXQpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh1c2VySW5mb1swXSA9PT0gJ3N1Y2Nlc3MnKSB7XG4gICAgICAgICAgICAgICAgYXVkaXREZXNjID0gZm9ybWF0TWVzc2FnZShob2xkZXJzLnN1Y2Nlc3NmdWxsUmVzZXQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnL3VzZXJzL3VwZGF0ZV9ub3RpZnknOlxuICAgICAgICAgICAgYXVkaXREZXNjID0gZm9ybWF0TWVzc2FnZShob2xkZXJzLnVwZGF0ZUdsb2JhbE5vdGlmaWNhdGlvbnMpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH0gZWxzZSBpZiAoYWN0aW9uVVJMLmluZGV4T2YoJy9ob29rcycpID09PSAwKSB7XG4gICAgICAgIGNvbnN0IHdlYmhvb2tJbmZvID0gYXVkaXQuZXh0cmFfaW5mbztcblxuICAgICAgICBzd2l0Y2ggKGFjdGlvblVSTCkge1xuICAgICAgICBjYXNlICcvaG9va3MvaW5jb21pbmcvY3JlYXRlJzpcbiAgICAgICAgICAgIGlmICh3ZWJob29rSW5mbyA9PT0gJ2F0dGVtcHQnKSB7XG4gICAgICAgICAgICAgICAgYXVkaXREZXNjID0gZm9ybWF0TWVzc2FnZShob2xkZXJzLmF0dGVtcHRlZFdlYmhvb2tDcmVhdGUpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh3ZWJob29rSW5mbyA9PT0gJ3N1Y2Nlc3MnKSB7XG4gICAgICAgICAgICAgICAgYXVkaXREZXNjID0gZm9ybWF0TWVzc2FnZShob2xkZXJzLnN1Y2NjZXNzZnVsbFdlYmhvb2tDcmVhdGUpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh3ZWJob29rSW5mbyA9PT0gJ2ZhaWwgLSBiYWQgY2hhbm5lbCBwZXJtaXNzaW9ucycpIHtcbiAgICAgICAgICAgICAgICBhdWRpdERlc2MgPSBmb3JtYXRNZXNzYWdlKGhvbGRlcnMuZmFpbGVkV2ViaG9va0NyZWF0ZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICcvaG9va3MvaW5jb21pbmcvZGVsZXRlJzpcbiAgICAgICAgICAgIGlmICh3ZWJob29rSW5mbyA9PT0gJ2F0dGVtcHQnKSB7XG4gICAgICAgICAgICAgICAgYXVkaXREZXNjID0gZm9ybWF0TWVzc2FnZShob2xkZXJzLmF0dGVtcHRlZFdlYmhvb2tEZWxldGUpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh3ZWJob29rSW5mbyA9PT0gJ3N1Y2Nlc3MnKSB7XG4gICAgICAgICAgICAgICAgYXVkaXREZXNjID0gZm9ybWF0TWVzc2FnZShob2xkZXJzLnN1Y2Nlc3NmdWxsV2ViaG9va0RlbGV0ZSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHdlYmhvb2tJbmZvID09PSAnZmFpbCAtIGluYXBwcm9wcmlhdGUgY29uZGl0aW9ucycpIHtcbiAgICAgICAgICAgICAgICBhdWRpdERlc2MgPSBmb3JtYXRNZXNzYWdlKGhvbGRlcnMuZmFpbGVkV2ViaG9va0RlbGV0ZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGFjdGlvblVSTC5pbmRleE9mKCcvbGljZW5zZScpID09PSAwKSB7XG4gICAgICAgIGNvbnN0IGxpY2Vuc2VJbmZvID0gYXVkaXQuZXh0cmFfaW5mbztcblxuICAgICAgICBzd2l0Y2ggKGFjdGlvblVSTCkge1xuICAgICAgICBjYXNlICcvbGljZW5zZS9hZGQnOlxuICAgICAgICAgICAgaWYgKGxpY2Vuc2VJbmZvID09PSAnYXR0ZW1wdCcpIHtcbiAgICAgICAgICAgICAgICBhdWRpdERlc2MgPSBmb3JtYXRNZXNzYWdlKGhvbGRlcnMuYXR0ZW1wdGVkTGljZW5zZUFkZCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGxpY2Vuc2VJbmZvID09PSAnc3VjY2VzcycpIHtcbiAgICAgICAgICAgICAgICBhdWRpdERlc2MgPSBmb3JtYXRNZXNzYWdlKGhvbGRlcnMuc3VjY2Vzc2Z1bGxMaWNlbnNlQWRkKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobGljZW5zZUluZm8gPT09ICdmYWlsZWQgLSBleHBpcmVkIG9yIG5vbi1zdGFydGVkIGxpY2Vuc2UnKSB7XG4gICAgICAgICAgICAgICAgYXVkaXREZXNjID0gZm9ybWF0TWVzc2FnZShob2xkZXJzLmZhaWxlZEV4cGlyZWRMaWNlbnNlQWRkKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobGljZW5zZUluZm8gPT09ICdmYWlsZWQgLSBpbnZhbGlkIGxpY2Vuc2UnKSB7XG4gICAgICAgICAgICAgICAgYXVkaXREZXNjID0gZm9ybWF0TWVzc2FnZShob2xkZXJzLmZhaWxlZEludmFsaWRMaWNlbnNlQWRkKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJy9saWNlbnNlL3JlbW92ZSc6XG4gICAgICAgICAgICBhdWRpdERlc2MgPSBmb3JtYXRNZXNzYWdlKGhvbGRlcnMubGljZW5zZVJlbW92ZWQpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH0gZWxzZSBpZiAoYWN0aW9uVVJMLmluZGV4T2YoJy9hZG1pbi9kb3dubG9hZF9jb21wbGlhbmNlX3JlcG9ydCcpID09PSAwKSB7XG4gICAgICAgIGF1ZGl0RGVzYyA9IHRvVGl0bGVDYXNlKGF1ZGl0LmV4dHJhX2luZm8pO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHN3aXRjaCAoYWN0aW9uVVJMKSB7XG4gICAgICAgIGNhc2UgJy9sb2dvdXQnOlxuICAgICAgICAgICAgYXVkaXREZXNjID0gZm9ybWF0TWVzc2FnZShob2xkZXJzLmxvZ291dCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnL3ZlcmlmeV9lbWFpbCc6XG4gICAgICAgICAgICBhdWRpdERlc2MgPSBmb3JtYXRNZXNzYWdlKGhvbGRlcnMudmVyaWZpZWQpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qIElmIGFsbCBlbHNlIGZhaWxzLi4uICovXG4gICAgaWYgKCFhdWRpdERlc2MpIHtcbiAgICAgICAgLyogQ3VycmVudGx5IG5vdCBjYWxsZWQgYW55d2hlcmUgKi9cbiAgICAgICAgaWYgKGF1ZGl0LmV4dHJhX2luZm8uaW5kZXhPZigncmV2b2tlZF9hbGw9JykgPj0gMCkge1xuICAgICAgICAgICAgYXVkaXREZXNjID0gZm9ybWF0TWVzc2FnZShob2xkZXJzLnJldm9rZWRBbGwpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGV0IGFjdGlvbkRlc2MgPSAnJztcbiAgICAgICAgICAgIGlmIChhY3Rpb25VUkwgJiYgYWN0aW9uVVJMLmxhc3RJbmRleE9mKCcvJykgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgYWN0aW9uRGVzYyA9IGFjdGlvblVSTC5zdWJzdHJpbmcoYWN0aW9uVVJMLmxhc3RJbmRleE9mKCcvJykgKyAxKS5yZXBsYWNlKCdfJywgJyAnKTtcbiAgICAgICAgICAgICAgICBhY3Rpb25EZXNjID0gdG9UaXRsZUNhc2UoYWN0aW9uRGVzYyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxldCBleHRyYUluZm9EZXNjID0gJyc7XG4gICAgICAgICAgICBpZiAoYXVkaXQuZXh0cmFfaW5mbykge1xuICAgICAgICAgICAgICAgIGV4dHJhSW5mb0Rlc2MgPSBhdWRpdC5leHRyYV9pbmZvO1xuXG4gICAgICAgICAgICAgICAgaWYgKGV4dHJhSW5mb0Rlc2MuaW5kZXhPZignPScpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBleHRyYUluZm9EZXNjID0gZXh0cmFJbmZvRGVzYy5zdWJzdHJpbmcoZXh0cmFJbmZvRGVzYy5pbmRleE9mKCc9JykgKyAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhdWRpdERlc2MgPSBhY3Rpb25EZXNjICsgJyAnICsgZXh0cmFJbmZvRGVzYztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShhdWRpdC5jcmVhdGVfYXQpO1xuICAgIGNvbnN0IGF1ZGl0SW5mbyA9IHt9O1xuICAgIGF1ZGl0SW5mby50aW1lc3RhbXAgPSAoXG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWREYXRlXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlPXtkYXRlfVxuICAgICAgICAgICAgICAgICAgICBkYXk9JzItZGlnaXQnXG4gICAgICAgICAgICAgICAgICAgIG1vbnRoPSdzaG9ydCdcbiAgICAgICAgICAgICAgICAgICAgeWVhcj0nbnVtZXJpYydcbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRUaW1lXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlPXtkYXRlfVxuICAgICAgICAgICAgICAgICAgICBob3VyPScyLWRpZ2l0J1xuICAgICAgICAgICAgICAgICAgICBtaW51dGU9JzItZGlnaXQnXG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICApO1xuICAgIGF1ZGl0SW5mby51c2VySWQgPSBhdWRpdC51c2VyX2lkO1xuICAgIGF1ZGl0SW5mby5kZXNjID0gYXVkaXREZXNjO1xuICAgIGF1ZGl0SW5mby5pcCA9IGF1ZGl0LmlwX2FkZHJlc3M7XG4gICAgYXVkaXRJbmZvLnNlc3Npb25JZCA9IGF1ZGl0LnNlc3Npb25faWQ7XG5cbiAgICByZXR1cm4gYXVkaXRJbmZvO1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQXJNQTtBQUNBO0FBME1BO0FBQ0E7QUFEQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFHQTtBQURBO0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBR0E7QUFDQTtBQUZBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBR0E7QUFDQTtBQUZBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBR0E7QUFDQTtBQUZBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUtBO0FBQ0E7QUFGQTtBQVFBO0FBQ0E7QUFGQTtBQWNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFSQTtBQVdBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXhDQTtBQTBDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBbkNBO0FBcUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUF2RkE7QUF5RkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUF0QkE7QUF3QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQWpCQTtBQW1CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBUkE7QUFVQTtBQUVBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBU0E7QUFDQTtBQUNBO0FBSEE7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./components/audit_table/audit_table.jsx\n");

/***/ }),

/***/ "./components/audit_table/index.js":
/*!*****************************************!*\
  !*** ./components/audit_table/index.js ***!
  \*****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react-redux */ \"./node_modules/react-redux/es/index.js\");\n/* harmony import */ var mattermost_redux_selectors_entities_users__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! mattermost-redux/selectors/entities/users */ \"./node_modules/mattermost-redux/selectors/entities/users.js\");\n/* harmony import */ var mattermost_redux_selectors_entities_users__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(mattermost_redux_selectors_entities_users__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var mattermost_redux_selectors_entities_channels__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! mattermost-redux/selectors/entities/channels */ \"./node_modules/mattermost-redux/selectors/entities/channels.js\");\n/* harmony import */ var mattermost_redux_selectors_entities_channels__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(mattermost_redux_selectors_entities_channels__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _audit_table_jsx__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./audit_table.jsx */ \"./components/audit_table/audit_table.jsx\");\n// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\n\n\n\n\nfunction mapStateToProps(state) {\n  return {\n    currentUser: Object(mattermost_redux_selectors_entities_users__WEBPACK_IMPORTED_MODULE_1__[\"getCurrentUser\"])(state),\n    getUser: function getUser(userId) {\n      return Object(mattermost_redux_selectors_entities_users__WEBPACK_IMPORTED_MODULE_1__[\"getUser\"])(state, userId);\n    },\n    getByName: function getByName(channelName) {\n      return Object(mattermost_redux_selectors_entities_channels__WEBPACK_IMPORTED_MODULE_2__[\"getChannelByName\"])(state, channelName);\n    }\n  };\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Object(react_redux__WEBPACK_IMPORTED_MODULE_0__[\"connect\"])(mapStateToProps)(_audit_table_jsx__WEBPACK_IMPORTED_MODULE_3__[\"default\"]));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jb21wb25lbnRzL2F1ZGl0X3RhYmxlL2luZGV4LmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vY29tcG9uZW50cy9hdWRpdF90YWJsZS9pbmRleC5qcz8yYTY5Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAoYykgMjAxNS1wcmVzZW50IE1hdHRlcm1vc3QsIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbi8vIFNlZSBMSUNFTlNFLnR4dCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cblxuaW1wb3J0IHtjb25uZWN0fSBmcm9tICdyZWFjdC1yZWR1eCc7XG5pbXBvcnQge2dldFVzZXIsIGdldEN1cnJlbnRVc2VyfSBmcm9tICdtYXR0ZXJtb3N0LXJlZHV4L3NlbGVjdG9ycy9lbnRpdGllcy91c2Vycyc7XG5pbXBvcnQge2dldENoYW5uZWxCeU5hbWV9IGZyb20gJ21hdHRlcm1vc3QtcmVkdXgvc2VsZWN0b3JzL2VudGl0aWVzL2NoYW5uZWxzJztcblxuaW1wb3J0IEF1ZGl0VGFibGUgZnJvbSAnLi9hdWRpdF90YWJsZS5qc3gnO1xuXG5mdW5jdGlvbiBtYXBTdGF0ZVRvUHJvcHMoc3RhdGUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBjdXJyZW50VXNlcjogZ2V0Q3VycmVudFVzZXIoc3RhdGUpLFxuICAgICAgICBnZXRVc2VyOiAodXNlcklkKSA9PiBnZXRVc2VyKHN0YXRlLCB1c2VySWQpLFxuICAgICAgICBnZXRCeU5hbWU6IChjaGFubmVsTmFtZSkgPT4gZ2V0Q2hhbm5lbEJ5TmFtZShzdGF0ZSwgY2hhbm5lbE5hbWUpLFxuICAgIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNvbm5lY3QobWFwU3RhdGVUb1Byb3BzKShBdWRpdFRhYmxlKTtcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUhBO0FBS0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./components/audit_table/index.js\n");

/***/ })

}]);